/**
 * AUTO-GENERATED FILE - DO NOT EDIT
 * 
 * Generated by scripts/embed-assets.ts
 * Run "bun run build:assets" to regenerate
 * 
 * This file embeds static assets as string constants so they are
 * available in compiled binaries where filesystem access does not work.
 */

export const APP_MD = `# Haltija App

You're running Haltija in the desktop app. This gives you a browser with superpowers - the Haltija widget is automatically injected into every page you visit, bypassing security restrictions that would normally block it.

## Quick Start

1. **Navigate to any website** using the address bar above
2. **Look for the widget** in the bottom-right corner (the elf icon)
3. **Connect your AI agent** using the REST API at \`http://localhost:8700\`

## For Your AI Agent

Give your agent this prompt to get started:

\`\`\`prompt
I have Haltija running. Use the hj command to control my browser.

hj status              # Check connection
hj tree                # See page structure (with ref IDs)
hj click 42            # Click element by ref ID
hj click "#selector"   # Click by CSS selector
hj type 10 "hello"     # Type into input
hj key Enter           # Press keys
hj screenshot          # Capture page
hj docs                # Quick start guide
hj api                 # Full API reference
hj --help              # All commands
\`\`\`

## Useful Commands

\`\`\`bash
hj status              # Server running?
hj tree                # DOM structure with ref IDs
hj tree -d 5           # Deeper tree
hj click 42            # Click by ref
hj click "#submit"     # Click by selector
hj type 10 "hello"     # Type text
hj key Enter           # Press key
hj screenshot          # Capture page
hj highlight 5 "Here"  # Show the user
hj events              # Recent activity
hj docs                # Quick start
hj api                 # Full API reference
\`\`\`

## Keyboard Shortcuts

- **Cmd+T** - New tab
- **Cmd+W** - Close tab
- **Cmd+1-9** - Switch to tab
- **Cmd+L** - Focus address bar
- **Cmd+R** - Refresh page
`

export const SERVICE_MD = `# Haltija Service

You're running the Haltija server. To give your AI agent browser control, inject the widget into a web page.

## Quick Start

1. **Drag the bookmarklet** below to your bookmarks bar
2. **Open any website** in your browser
3. **Click the bookmarklet** to inject the widget
4. **Use hj commands** to control the browser

## The Bookmarklet

Drag this to your bookmarks bar:

\`\`\`bookmarklet
Haltija
\`\`\`

Or copy this JavaScript URL manually:

\`\`\`js
javascript:(function(){var s=document.createElement('script');s.src='http://localhost:8700/inject.js';document.body.appendChild(s);})()
\`\`\`

## For Your AI Agent

Give your agent this prompt:

\`\`\`
I have Haltija running. Use the hj command to control my browser:

hj status              # Check connection
hj tree                # See page structure
hj click <ref>         # Click by ref ID from tree
hj click "#selector"   # Click by CSS selector
hj type <ref> "text"   # Type into input
hj key Enter           # Press keys
hj screenshot          # Capture page
hj docs                # Full command reference

Example workflow:
1. hj tree              # See what's on page
2. hj click 42          # Click element with ref 42
3. hj type 15 "hello"   # Type into input ref 15
\`\`\`

## Commands

\`\`\`bash
# Check status
hj status              # Server running?
hj windows             # Browser tabs connected?

# See the page  
hj tree                # DOM structure with ref IDs
hj tree -d 5           # Deeper tree
hj console             # Browser console output

# Interact
hj click 42            # Click by ref
hj click "#submit"     # Click by selector
hj type 10 "hello"     # Type text
hj key Enter           # Press key
hj key s --ctrl        # Keyboard shortcut

# Navigate
hj navigate example.com
hj refresh
hj location

# Show the user
hj highlight 5 "Look here"
hj unhighlight

# Capture
hj screenshot
hj events              # Recent activity
\`\`\`

Run \`hj --help\` for all commands, or \`hj docs\` for full reference.

## Troubleshooting

**Widget not appearing?**
- Some sites have strict CSP that blocks the widget
- Try the Haltija desktop app: \`bunx haltija\`

**Agent can't connect?**
- Click the bookmarklet after the page loads
- Check widget shows green status (connected)
- Run \`hj status\` to verify server

## REST API

For direct HTTP integration, see [REST-API.md](../REST-API.md).
`

export const PLAYGROUND_MD = `# Playground

This is a sandbox for testing Haltija commands. The elements below are designed for agents to practice interacting with web pages.

## Interactive Elements

Use these to test clicking, typing, and reading page content.

### Buttons

<div class="test-buttons">
  <button id="btn-primary" class="btn-test primary">Primary Button</button>
  <button id="btn-secondary" class="btn-test secondary">Secondary Button</button>
  <button id="btn-danger" class="btn-test danger">Danger Button</button>
</div>

### Form Inputs

<div class="test-form">
  <div class="form-row">
    <label for="text-input">Text Input:</label>
    <input type="text" id="text-input" placeholder="Type something here...">
  </div>
  <div class="form-row">
    <label for="email-input">Email:</label>
    <input type="email" id="email-input" placeholder="you@example.com">
  </div>
  <div class="form-row">
    <label for="select-input">Dropdown:</label>
    <select id="select-input">
      <option value="">Choose an option...</option>
      <option value="a">Option A</option>
      <option value="b">Option B</option>
      <option value="c">Option C</option>
    </select>
  </div>
  <div class="form-row">
    <label>Checkboxes:</label>
    <div class="checkbox-group">
      <label><input type="checkbox" id="check-1"> Option 1</label>
      <label><input type="checkbox" id="check-2"> Option 2</label>
      <label><input type="checkbox" id="check-3"> Option 3</label>
    </div>
  </div>
</div>

### Output Area

<div id="output" class="output-box">
  Click buttons or type in fields to see results here.
</div>

## Test Commands

Try these commands to interact with the playground:

\`\`\`bash
# Click the primary button
hj click "#btn-primary"

# Type in the text input
hj type "#text-input" "Hello from the agent!"

# Read the output area
hj query "#output"

# Get all form values
hj eval 'JSON.stringify({text: document.getElementById("text-input").value, email: document.getElementById("email-input").value})'
\`\`\`
`

export const ICON_SVG = `<?xml version="1.0" encoding="utf-8"?>
<svg x="0pt" y="0pt" width="1024pt" height="1024pt" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <!--Generated by AMDN-->
  <g id="Layer_1">
    <g id="Layer_1-1">
      <radialGradient cx="512" cy="512" r="516" fx="512" fy="512" gradientUnits="userSpaceOnUse" gradientTransform="matrix(-4.37114e-08,1,-1,-4.37114e-08,1024,2.23802e-05)" id="am2">
        <stop style="stop-color:#3da8f4;stop-opacity:1;"/>
        <stop offset="1" style="stop-color:#382f93;stop-opacity:1;"/>
      </radialGradient>
      <g id="Path">
        <path style="fill:url(#am2);fill-opacity:1;fill-rule:evenodd;opacity:1;stroke:none;" d="M-4,-4 C-4,-4,1028,-4,1028,-4 C1028,-4,1028,1028,1028,1028 C1028,1028,-4,1028,-4,1028 C-4,1028,-4,-4,-4,-4 z"/>
      </g>
      <g id="Halitja">
        <g id="Fills">
          <path id="Fills_1" style="fill:#bcffaa;fill-opacity:0.2;fill-rule:evenodd;opacity:1;stroke:none;" d="M552.544,379.549 C585.574,379.549,612.349,406.325,612.349,439.354 C612.349,472.383,585.574,499.159,552.544,499.159 C519.515,499.159,492.74,472.383,492.74,439.354 C492.74,406.325,519.515,379.549,552.544,379.549 z"/>
          <path id="Path_1" style="fill:#f4cfff;fill-opacity:0.4;fill-rule:nonzero;opacity:1;stroke:none;" d="M205.463,551.488 C205.463,551.488,216.143,577.119,216.143,577.119 C216.143,577.119,210.803,584.594,210.803,584.594 C210.803,584.594,219.841,606.193,219.841,606.193 C219.841,606.193,249.015,612.161,253.521,628.38 C258.86,647.603,242.172,659.561,244.797,665.833 C252.05,683.169,273.811,735.174,273.811,735.174 C273.811,735.174,307.986,723.427,307.986,723.427 C307.986,723.427,244.977,568.575,244.977,568.575 C244.977,568.575,232.162,568.575,232.162,568.575 C232.162,568.575,221.482,541.877,221.482,541.877 C221.482,541.877,205.463,551.488,205.463,551.488 z"/>
          <path id="Path_2" style="fill:#f4cfff;fill-opacity:0.4;fill-rule:nonzero;opacity:1;stroke:none;" d="M389.149,834.493 C422.255,840.9,447.886,835.561,448.954,822.745 C450.022,809.93,467.109,777.892,467.109,777.892 C467.109,777.892,462.837,760.805,462.837,760.805 C462.837,760.805,489.536,762.941,489.536,762.941 C489.536,762.941,488.468,813.134,488.468,813.134 C488.468,813.134,505.555,849.444,540.797,845.172 C576.039,840.9,593.126,829.153,594.194,818.474 C595.262,807.794,596.33,766.144,596.33,766.144 C596.33,766.144,585.651,687.117,585.651,687.117 C585.651,687.117,577.107,682.845,577.107,682.845 C577.107,682.845,582.447,644.399,582.447,644.399 C582.447,644.399,571.767,629.448,554.68,630.516 C537.593,631.584,524.778,644.399,524.778,644.399 C524.778,644.399,525.846,679.641,525.846,679.641 C525.846,679.641,510.895,689.253,510.895,689.253 C510.895,689.253,509.827,702.068,509.827,702.068 C509.827,702.068,500.215,691.388,487.4,689.253 C474.585,687.117,467.109,690.321,467.109,690.321 C467.109,690.321,482.06,651.875,482.06,651.875 C482.06,651.875,474.585,634.788,461.769,631.584 C448.954,628.38,426.527,634.788,426.527,634.788 C426.527,634.788,417.984,659.35,417.984,659.35 C417.984,659.35,422.255,668.962,422.255,668.962 C422.255,668.962,405.168,674.301,405.168,674.301 C405.168,674.301,365.654,740.514,365.654,740.514 C365.654,740.514,346.431,787.503,346.431,787.503 C346.431,787.503,356.043,828.085,389.149,834.493 z"/>
          <path id="Path_3" style="fill:#bcffaa;fill-opacity:0.2;fill-rule:nonzero;opacity:1;stroke:none;" d="M366.722,772.552 C366.722,772.552,370.994,799.251,395.557,806.726 C420.12,814.202,446.818,799.251,446.818,799.251 C446.818,799.251,438.275,782.164,414.78,775.756 C391.285,769.348,366.722,772.552,366.722,772.552 z"/>
          <path id="Path_Copy" style="fill:#bcffaa;fill-opacity:0.2;fill-rule:nonzero;opacity:1;stroke:none;" d="M501.735,791.4 C501.735,791.4,511.3,816.69,536.865,819.061 C562.431,821.433,585.568,801.407,585.568,801.407 C585.568,801.407,573.756,786.393,549.451,784.852 C525.147,783.312,501.735,791.4,501.735,791.4 z"/>
          <path id="Fills_Copy" style="fill:#bcffaa;fill-opacity:0.2;fill-rule:evenodd;opacity:1;stroke:none;" d="M377.402,380.617 C410.431,380.617,437.207,407.393,437.207,440.422 C437.207,473.451,410.431,500.227,377.402,500.227 C344.373,500.227,317.597,473.451,317.597,440.422 C317.597,407.393,344.373,380.617,377.402,380.617 z"/>
          <g id="Group">
            <path id="Path_579" style="fill:#bcffaa;fill-opacity:0.2;fill-rule:evenodd;opacity:1;stroke:none;" d="M160.61,349.647 C208.974,349.647,248.181,388.854,248.181,437.218 C248.181,485.583,208.974,524.789,160.61,524.789 C112.245,524.789,73.0382,485.583,73.0382,437.218 C73.0382,388.854,112.245,349.647,160.61,349.647 z"/>
            <path id="Path_578" style="fill:#f4cfff;fill-opacity:0.4;fill-rule:evenodd;opacity:1;stroke:none;" d="M160.61,317.609 C226.668,317.609,280.219,371.16,280.219,437.218 C280.219,503.277,226.668,556.828,160.61,556.828 C94.551,556.828,41,503.277,41,437.218 C41,371.16,94.551,317.609,160.61,317.609 z M160.61,349.647 C208.974,349.647,248.181,388.854,248.181,437.218 C248.181,485.582,208.974,524.789,160.61,524.789 C112.245,524.789,73.0382,485.582,73.0382,437.218 C73.0382,388.854,112.245,349.647,160.61,349.647 z"/>
            <path id="Path_4" style="fill:#afff85;fill-opacity:0.4;fill-rule:nonzero;opacity:1;stroke:none;" d="M309.054,305.861 C311.189,314.405,422.393,327.269,454.294,330.424 C551.476,340.035,640.116,312.269,640.116,312.269 C640.116,312.269,766.133,376.346,766.133,376.346 C766.133,376.346,773.608,450.034,773.608,450.034 C773.608,450.034,813.122,457.509,813.122,457.509 C813.122,457.509,837.685,448.966,838.753,434.014 C839.821,419.063,790.696,388.093,786.424,364.598 C782.152,341.103,799.239,154.214,609.145,127.515 C419.052,100.816,399.829,219.358,397.693,227.902 C395.557,236.445,384.877,264.212,384.877,264.212 C384.877,264.212,349.635,272.755,334.684,281.299 C319.733,289.842,306.918,297.318,309.054,305.861 z"/>
          </g>
          <path id="Path_5" style="fill:#b6cdff;fill-opacity:0.478301;fill-rule:nonzero;opacity:1;stroke:none;" d="M195.852,661.486 C208.667,686.049,257.792,702.068,257.792,702.068 C257.792,702.068,244.977,665.758,244.977,665.758 C244.977,665.758,262.064,645.467,251.385,624.108 C240.705,602.749,211.871,603.817,203.327,610.225 C194.784,616.633,183.036,636.923,195.852,661.486 z"/>
          <path id="Path_6" style="fill:#b6cdff;fill-opacity:0.478301;fill-rule:nonzero;opacity:1;stroke:none;" d="M368.858,326.152 C368.858,326.152,352.839,377.413,352.839,377.413 C352.839,377.413,359.247,385.957,359.247,385.957 C359.247,385.957,349.635,498.091,349.635,498.091 C349.635,498.091,343.228,515.178,343.228,515.178 C343.228,515.178,345.364,570.711,345.364,570.711 C345.364,570.711,264.2,615.565,264.2,615.565 C264.2,615.565,303.714,709.544,303.714,709.544 C303.714,709.544,372.062,698.864,372.062,698.864 C372.062,698.864,379.538,712.747,379.538,712.747 C379.538,712.747,401.964,676.437,401.964,676.437 C401.964,676.437,419.052,670.03,419.052,670.03 C419.052,670.03,414.78,661.486,414.78,661.486 C414.78,661.486,427.595,633.72,427.595,633.72 C427.595,633.72,459.633,631.584,459.633,631.584 C459.633,631.584,480.992,650.807,480.992,650.807 C480.992,650.807,470.313,689.253,470.313,689.253 C470.313,689.253,509.827,699.932,509.827,699.932 C509.827,699.932,525.846,678.573,525.846,678.573 C525.846,678.573,523.71,667.894,523.71,667.894 C523.71,667.894,525.846,642.263,525.846,642.263 C525.846,642.263,550.409,632.652,550.409,632.652 C550.409,632.652,584.583,647.603,584.583,647.603 C584.583,647.603,576.039,683.913,576.039,683.913 C576.039,683.913,587.786,695.66,587.786,695.66 C587.786,695.66,597.398,775.756,597.398,775.756 C597.398,775.756,595.262,820.609,595.262,820.609 C595.262,820.609,577.107,852.648,535.457,845.172 C493.808,837.697,486.332,809.93,486.332,809.93 C486.332,809.93,485.264,764.009,485.264,764.009 C485.264,764.009,459.633,765.077,459.633,765.077 C459.633,765.077,460.701,781.096,460.701,781.096 C460.701,781.096,450.022,824.881,450.022,824.881 C450.022,824.881,518.69,912.76,618.757,925.268 C738.366,940.219,808.851,884.686,861.18,887.89 C913.509,891.094,981.857,978.665,981.857,978.665 C981.857,978.665,989.333,876.143,950.887,843.036 C912.441,809.93,819.53,784.299,804.579,759.737 C789.628,735.174,787.492,718.087,787.492,718.087 C787.492,718.087,883.535,755.626,900.694,717.019 C926.324,659.35,800.307,602.749,788.56,560.032 C776.812,517.314,766.133,372.074,766.133,372.074 C766.133,372.074,639.048,311.201,639.048,311.201 C639.048,311.201,555.851,334.4,508.759,333.628 C443.614,332.56,368.858,326.152,368.858,326.152 z"/>
        </g>
        <g id="Outlines">
          <path id="Path_7" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M551.476,377.413 C585.685,377.413,613.417,405.145,613.417,439.354 C613.417,473.563,585.685,501.295,551.476,501.295 C517.268,501.295,489.536,473.563,489.536,439.354 C489.536,405.145,517.268,377.413,551.476,377.413 z"/>
          <path id="Path_Copy_1" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M376.332,377.413 C410.541,377.413,438.273,405.145,438.273,439.354 C438.273,473.563,410.541,501.295,376.332,501.295 C342.123,501.295,314.392,473.563,314.392,439.354 C314.392,405.145,342.123,377.413,376.332,377.413 z"/>
          <g id="Group_1">
            <path id="Path_564" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M437.901,432.53 C445.659,427.342,454.51,424.403,463.905,424.403 C473.3,424.403,482.15,427.342,489.908,432.529"/>
          </g>
          <path id="Path_8" style="fill:#ffffff;fill-opacity:1;fill-rule:evenodd;opacity:1;stroke:none;" d="M537.593,419.063 C545.261,419.063,551.476,428.626,551.476,440.422 C551.476,452.218,545.261,461.781,537.593,461.781 C529.926,461.781,523.71,452.218,523.71,440.422 C523.71,428.626,529.926,419.063,537.593,419.063 z"/>
          <path id="Path_Copy_2" style="fill:#ffffff;fill-opacity:1;fill-rule:evenodd;opacity:1;stroke:none;" d="M379.538,419.063 C387.205,419.063,393.421,428.626,393.421,440.422 C393.421,452.218,387.205,461.781,379.538,461.781 C371.87,461.781,365.655,452.218,365.655,440.422 C365.655,428.626,371.87,419.063,379.538,419.063 z"/>
          <path id="Path_9" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M504.679,522.486 C501.515,525.1,497.994,527.384,494.142,529.263 C481.022,535.662,466.55,536.138,453.758,531.733"/>
          <g id="Group_2">
            <path id="Path_10" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M543.121,781.194 C572.806,783.632,595.716,799.666,594.292,817.007 C592.868,834.348,567.649,846.429,537.963,843.991 C508.278,841.553,485.368,825.519,486.792,808.178 C488.216,790.837,513.435,778.756,543.121,781.194 z"/>
            <path id="Path_Copy_3" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M584.705,798.467 C577.002,811.661,559.546,820.047,540.039,818.445 C520.066,816.804,503.922,805.184,498.859,790.417"/>
            <path id="Path_572" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M597.352,779.752 C598.776,762.411,575.866,746.377,546.18,743.939 C516.495,741.501,491.276,753.583,489.851,770.924 C489.851,770.924,512.721,693.512,512.721,693.512 C513.711,681.463,531.234,673.068,551.861,674.762 C572.488,676.456,588.407,687.598,587.418,699.647 C587.418,699.647,597.352,779.752,597.352,779.752 z"/>
            <path id="Path_570" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M580.423,675.391 C581.176,666.221,569.062,657.743,553.365,656.454 C537.668,655.165,524.333,661.553,523.58,670.722 C523.58,670.722,525.593,646.209,525.593,646.209 C526.346,637.04,539.681,630.652,555.378,631.941 C571.075,633.23,583.189,641.708,582.436,650.878 C582.436,650.878,580.423,675.391,580.423,675.391 z"/>
            <path id="Path_574" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M597.352,779.752 C598.776,762.411,575.866,746.377,546.18,743.939 C516.495,741.501,491.276,753.583,489.851,770.924 C489.851,770.924,486.792,808.178,486.792,808.178 C488.216,790.837,513.435,778.756,543.121,781.194 C572.806,783.632,595.716,799.666,594.292,817.007 C594.292,817.007,597.352,779.752,597.352,779.752 z"/>
          </g>
          <g id="Group_3">
            <path id="Path_11" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M476.295,738.177 C488.259,741.382,496.473,749.523,494.641,756.36 C492.809,763.196,481.625,766.139,469.662,762.934 C457.698,759.728,449.484,751.587,451.316,744.751 C453.148,737.914,464.331,734.971,476.295,738.177 z"/>
            <path id="Path_Copy_4" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M451.316,744.751 C451.316,744.751,462.473,703.11,464.305,696.273 C466.137,689.437,477.321,686.493,489.285,689.699 C501.249,692.905,509.462,701.046,507.63,707.882 C505.799,714.719,494.908,755.365,494.908,755.365"/>
          </g>
          <g id="Group_Copy">
            <path id="Path_12" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M409.813,772.452 C437.958,782.198,456.159,803.428,450.466,819.869 C444.772,836.311,417.34,841.738,389.195,831.992 C361.049,822.245,342.848,801.016,348.542,784.574 C354.235,768.133,381.667,762.706,409.813,772.452 z"/>
            <path id="Path_Copy_5" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M445.792,799.528 C435.049,810.391,416.056,814.17,397.561,807.765 C378.624,801.207,365.879,785.936,364.648,770.374"/>
            <path id="Path_572_1" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M462.698,784.547 C468.391,768.106,450.19,746.876,422.044,737.13 C393.899,727.383,366.467,732.811,360.773,749.252 C360.773,749.252,402.183,679.964,402.183,679.964 C406.139,668.54,425.2,664.769,444.757,671.541 C456.628,675.652,465.953,682.703,470.565,690.165"/>
            <path id="Path_570_1" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M472.264,679.255 C475.275,670.561,465.651,659.336,450.768,654.182 C435.885,649.029,421.38,651.898,418.37,660.592 C418.37,660.592,426.418,637.351,426.418,637.351 C429.428,628.657,443.934,625.787,458.816,630.941 C473.699,636.094,483.323,647.32,480.313,656.014 C480.313,656.014,472.264,679.255,472.264,679.255 z"/>
            <path id="Path_574_1" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M462.698,784.547 C468.391,768.106,450.19,746.876,422.044,737.13 C393.899,727.383,366.467,732.811,360.773,749.252 C360.773,749.252,348.542,784.574,348.542,784.574 C354.235,768.133,381.667,762.706,409.813,772.452 C437.958,782.198,456.159,803.428,450.466,819.869 C450.466,819.869,462.698,784.547,462.698,784.547 z"/>
          </g>
          <path id="Path_13" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M614.485,435.082 C614.485,435.082,697.611,435.082,712.562,435.082 C727.514,435.082,735.163,452.094,735.163,459.645"/>
          <path id="Path_14" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M161.677,316.541 C227.736,316.541,281.287,370.092,281.287,436.15 C281.287,502.209,227.736,555.76,161.677,555.76 C95.6189,555.76,42.0679,502.209,42.0679,436.15 C42.0679,370.092,95.6189,316.541,161.677,316.541 z"/>
          <path id="Path_Copy_6" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M161.677,347.514 C210.63,347.514,250.314,387.198,250.314,436.15 C250.314,485.103,210.63,524.787,161.677,524.787 C112.725,524.787,73.0412,485.103,73.0412,436.15 C73.0412,387.198,112.725,347.514,161.677,347.514 z"/>
          <path id="Path_Copy_7" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M101.873,436.15 C101.873,403.121,128.648,376.346,161.677,376.346"/>
          <g id="Group_4">
            <path id="Rectangle" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M217.049,604.954 C217.049,604.954,210.955,590.599,210.955,590.599 C208.19,584.084,211.23,576.56,217.745,573.795 C217.745,573.795,230.524,568.37,230.524,568.37 C237.039,565.605,244.563,568.645,247.328,575.16 C247.328,575.16,305.967,713.304,305.967,713.304 C308.732,719.819,305.693,727.342,299.178,730.108 C299.178,730.108,286.398,735.533,286.398,735.533 C279.883,738.298,272.36,735.258,269.594,728.743 C269.594,728.743,259.129,704.09,259.129,704.09"/>
            <path id="Path_15" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M383.809,262.076 C400.897,200.135,442.523,121.107,541.865,121.107 C641.207,121.107,783.755,151.369,783.755,354.969 C783.755,368.582,789.628,376.346,830.209,420.131"/>
            <path id="Path_16" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M644.387,313.337 C644.387,313.337,666.814,263.144,658.271,210.814 C649.727,158.485,603.806,124.311,603.806,124.311 C603.806,124.311,581.599,42.9347,549.341,74.1178 C517.302,105.088,602.738,124.311,602.738,124.311"/>
            <path id="Path_17" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M463.905,264.212 C463.905,264.212,469.245,193.727,519.438,158.485 C569.631,123.243,604.874,125.379,604.874,125.379 C604.874,125.379,664.678,54.8949,682.833,97.6126 C700.988,140.33,611.281,127.515,611.281,127.515"/>
            <path id="Path_18" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M214.796,575.047 C214.796,575.047,203.529,548.505,203.529,548.505 M221.224,540.994 C221.224,540.994,232.49,567.536,232.49,567.536"/>
          </g>
          <path id="Path_19" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M369.926,322.948 C363.735,340.284,358.341,358.098,354.054,380.645 M343.839,492.739 C343.436,507.395,343.228,523.351,343.228,540.809 C343.228,599.36,356.939,660.384,381.301,716.114 M448.942,824.892 C500.923,885.211,568.687,925.268,644.436,925.268 C795.02,925.268,768.97,890.026,868.655,890.026 C926.413,890.026,982.925,978.665,982.925,978.665 C982.925,978.665,1001.08,868.667,925.256,820.61 C849.432,772.552,802.443,783.232,784.288,718.087"/>
          <path id="Path_20" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M365.654,377.413 C365.654,377.413,353.907,405.18,350.703,438.286 C347.616,470.193,350.703,495.955,350.703,495.955"/>
          <path id="Path_21" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M763.997,373.142 C772.541,411.588,775.744,438.286,777.88,518.382 C780.016,598.478,904.965,659.293,904.965,698.864 C904.965,729.908,880.403,734.106,856.908,734.106 C824.799,734.106,734.095,699.932,710.6,665.758"/>
          <path id="Path_22" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M792.831,514.11 C744.774,530.129,646.523,594.206,587.786,699.932"/>
          <path id="Path_23" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M342.16,568.575"/>
          <path id="Path_577" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M373.13,696.728 C373.13,696.728,365.654,704.204,328.276,706.34 C321.4,706.733,313.602,706.837,303.714,706.34 M258.86,703.136 C226.288,695.312,194.784,676.156,194.784,645.467 C194.784,637.071,189.444,605.953,218.278,607.021 C247.113,608.089,251.385,620.904,253.521,633.72 C255.656,646.535,253.521,658.282,243.909,665.758 C256.71,699.993,243.909,665.758,243.909,665.758 C243.909,665.758,258.86,703.136,258.86,703.136 z"/>
          <path id="Path_24" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M342.16,569.643 C326.444,589.778,294.017,603.115,263.571,613.631"/>
          <path id="Path_25" style="fill:none;opacity:1;stroke:#ffffff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-opacity:1;stroke-width:12;" d="M776.812,448.966 C808.851,462.849,838.231,458.626,838.231,432.509 C838.231,416.846,750.262,355.696,642.94,313.229 C570.073,284.396,488.285,262.076,419.052,262.076 C363.426,262.076,307.986,287.706,307.986,303.725 C307.986,319.745,443.047,332.56,509.827,332.56 C576.606,332.56,636.912,315.473,636.912,315.473"/>
        </g>
      </g>
    </g>
  </g>
</svg>
`

export const UX_CRIMES_MD = `# The Haltija Criminal Code (v1.0)

A comprehensive database of UX anti-patterns that Haltija can detect programmatically.
This turns the agent into a **"Compliance Officer"** and **"Linting Tool for Psychology"**.

> "Make your web app feel like a native app."

---

## Class 1: Interaction Integrity (The "UX Historian" Crimes)

*Violations of 40 years of established OS/GUI conventions. These happen when designers reinvent standard controls in a vacuum.*

### 1. The Conflated Tree View

**The Crime:** Clicking a parent node selects it *and* expands it simultaneously, or selection is impossible without expansion.

**The OS Standard:** Selection (Click) and Expansion (Triangle/Arrow) are distinct actions.

**Haltija Signature:**
- Click parent row
- Check if \`aria-expanded\` toggles *and* \`aria-selected\` toggles instantly
- Verify Arrow Keys (\`Right\` to expand, \`Left\` to collapse) function correctly

---

### 2. The Disclosure Heresy

**The Crime:** An arrow pointing **UP** to indicate an open/expanded state (because "the drawer pulls up"), violating the reading flow convention.

**The OS Standard:** 
- **Right (▶)** = Closed/Next ("content is this way")
- **Down (▼)** = Open ("content flows below")

**The Philosophy:** Designers in a vacuum think "the drawer pulls up, so arrow points up." But users are in **Reading Mode** (following flow), not **Mechanical Mode** (operating a lever).

**Haltija Signature:**
- Compare icon rotation/SVG path between \`aria-expanded="true"\` and \`false\`
- Detect 180° rotation (Down → Up) on inline items
- *Exception:* Bottom-of-screen drawers may legitimately use Up

---

### 3. The Ambiguous Toggle

**The Crime:** A switch that relies solely on color (Green/Grey) or position (Left/Right) without text labels like "On/Off".

**The Issue:** Does "Green" mean it *is* on, or that clicking it *turns* it on? (State vs. Action confusion)

**Haltija Signature:**
- Detect \`role="switch"\` or checkbox styled as toggle
- Check for adjacent \`<label>\` or internal text
- If text is missing → **Crime**

---

### 4. The Scrollbar Lie (Gaslighting Scroll)

**The Crime:** Virtual scrolling that jumps, changes the scrollbar thumb size while dragging, or loses position when scrolling up.

**The OS Standard:** Scrollbars act as a fixed map of the content. 10% scroll movement = 10% content movement.

**Haltija Signature:**
- Measure \`scrollHeight\` change during scroll events
- If \`scrollHeight\` varies by >10% without explicit "Load More" action → **Crime**
- Monitor scroll-up: if \`scrollTop\` jumps by >100px without user input → **Crime**

---

### 5. Multi-Select Amnesia

**The Crime:** A list that requires individual clicking of 50 items because \`Shift+Click\` (Range) and \`Cmd/Ctrl+Click\` (Toggle) are ignored.

**Haltija Signature:**
- Click Item 1
- Hold Shift, Click Item 5
- Check selection count
- If < 5 → **Crime**

---

### 6. Infinite Scroll in Data Tables

**The Crime:** Using infinite scroll in enterprise data grids because "pagination is old school."

**The Reality:** In data grids, position matters. Users need to know "I am roughly 50% through the alphabet." Infinite scroll destroys the scrollbar's utility as a "Map."

**Haltija Signature:**
- Detect a \`<table>\` or \`role="grid"\`
- Scroll to bottom - does it load more rows?
- **Verdict:** "Data Integrity Risk. Infinite scroll prevents footer access and destroys spatial memory."

---

## Class 2: Dark Patterns & "Conversion Optimization"

*Deliberate hostility designed to trick the user or prevent them from leaving.*

### 7. The Trapdoor Cancel

**The Crime:** The "Save" button is a massive, high-contrast primary button. The "Cancel" button is a tiny, grey text link (10-12px), hidden in a corner.

**The Philosophy:** Usability is about helping the user make the *correct* decision, not just the *business* decision.

**Haltija Signature:**
- Identify the Form Actions container
- Compare Primary vs. Secondary action
- **Heuristic:** If Secondary Action is:
  - \`<a>\` instead of \`<button>\`, OR
  - font-size < 80% of Primary, OR
  - contrast ratio < 3:1
  → **Crime**

---

### 8. The Roach Motel

**The Crime:** Signup takes 1 click. Cancellation requires a phone call, chat with a bot, or >3 levels of menu navigation.

**Haltija Signature:**
- Navigate to "Settings"
- Search DOM for "Cancel," "Delete," "Close Account"
- If count is 0 or link is deep in nested divs → **Crime**

---

### 9. Confirmshaming

**The Crime:** "No, I prefer to pay full price" or "No, I don't like saving money."

**Haltija Signature:**
- Analyze negative action text sentiment
- Detect manipulative phrasing (keywords: "dumb," "lose," "prefer to pay," "miss out")

---

### 10. The Phantom Shield (Cookie Wall)

**The Crime:** Transparent or invisible layers (cookie banners) blocking clicks on the main UI, making the site feel broken/frozen.

**Haltija Signature:**
1. **Click Intercept Test:**
   - Fire \`click\` at center of viewport (e.g., Login button)
   - Check which element actually received the event
   - If target is \`div.cookie-wrapper\` instead of intended button → **Critical Crime**

2. **Invisible Wall Heuristic:**
   - Find elements with \`position: fixed\` covering >80% of viewport
   - Check: \`background-color: transparent\` AND \`pointer-events: auto\`?
   - Report: "Invisible High-Z Element blocking interactions. Site appears frozen."

**Severity:** Critical (Site Unusable)

---

## Class 3: Internationalization (i18n) Hostility

*Design that assumes every user is in the US, speaks English, and has a US keyboard.*

### 11. The Buried Country

**The Crime:** "United States" is at the top. "Afghanistan" is second. "Finland" is item #64. No search/typeahead.

**Haltija Signature:**
- Open dropdown
- Check index of current user's locale country
- If index > 10 and list is > 50 → **Crime**
- Test typeahead: focus list, send keystrokes "F", "I"
  - *Pass:* Selection jumps to "Fiji" then "Finland"
  - *Fail:* Nothing happens, or jumps to "France" (ignoring "I")

---

### 12. Zip Code Jail

**The Crime:** Rejecting alphanumeric postal codes (UK: \`EC1A 1BB\`, Canada: \`M5V 2H1\`) because the regex expects 5 digits.

**Haltija Signature:**
- Input \`EC1A 1BB\` into postal field
- Check for validation error
- If error → **Crime: "Globalization Fail"**

---

### 13. The Phone Number Pedant

**The Crime:** "Invalid format. Do not use dashes." / "Invalid format. You must use dashes."

**The Fix:** Strip non-digits on the backend! Don't make the user do data entry work.

**Haltija Signature:**
- Fuzz input with:
  - \`+358 40 1234567\` (Standard International)
  - \`040-123-4567\` (Local formatted)
  - \`0401234567\` (Raw)
- If *any* valid format triggers error → **Crime**

---

### 14. The Polygloat Menu

**The Crime:** Listing languages in English ("German", "Japanese") instead of endonyms ("Deutsch", "日本語").

**The Problem:** Non-English speakers can't read English! They're looking for their language *in their language*.

**Haltija Signature:**
- Scan language menu
- Regex check: Does "Spanish" match \`Español\`? "German" match \`Deutsch\`?
- If text is purely ASCII English names for non-English languages → **Crime**

---

### 15. The Cookie Wall (EU Blocker)

**The Crime:** Cookie modal so poorly implemented it's impossible to click "Login" because an invisible \`div\` covers the screen, or the "Reject" button is off-canvas on mobile.

**Haltija Signature:**
- Element: Fixed position \`div\` with high \`z-index\`, keywords "Cookie", "Consent"
- Attempt to click primary action *before* interacting with banner
- Check if click intercepted
- **GDPR Check:** Is there a \`button\` with text "Reject" or "Necessary Only"?

---

## Class 4: Forms from Hell

*Friction points that destroy data entry speed.*

### 16. The Paste Blockade

**The Crime:** Blocking \`paste\` on password or account number fields.

**Haltija Signature:**
- Attempt \`paste\` event
- Check \`defaultPrevented\`
- If blocked → **Crime**

---

### 17. The Amnesiac Form

**The Crime:** Submitting the form with one error wipes all other valid fields.

**Haltija Signature:**
- Fill form completely
- Intentionally break one field
- Submit
- Check if other fields retained values
- If wiped → **Crime**

---

### 18. The Label Lie

**The Crime:** Using \`placeholder\` text as the only label. It vanishes when you type, forcing reliance on memory.

**Haltija Signature:**
- Check input for \`<label>\` element, \`aria-label\`, or \`aria-labelledby\`
- If all missing → **Crime**

---

## Class 5: Accessibility & Mobile Hostility

*Basic exclusions of users with disabilities or touch interfaces.*

### 19. The "Div" Button

**The Crime:** \`<div>\` or \`<span>\` with \`onClick\` but no \`role="button"\` and no \`tabindex\`. Invisible to screen readers and keyboard users.

**Haltija Signature:**
- Query elements with click listeners
- Check tag name
- If generic container without proper ARIA → **Crime**

---

### 20. The Tiny Tap

**The Crime:** Interactive elements smaller than 44x44px.

**Haltija Signature:**
- Compute \`boundingClientRect\` of all \`<a>\` and \`<button>\` elements
- Flag any < 44px in either dimension

---

### 21. Focus Trap / Ghost Focus

**The Crime:** 
- Opening a modal does not trap focus inside it, OR
- Closing modal resets focus to \`<body>\` instead of the trigger button

**Haltija Signature:**
- Open modal
- Press \`Tab\` repeatedly
- If focus leaves modal → **Crime**
- Close modal
- Check \`document.activeElement\`
- If not the original trigger → **Crime**

---

## Class 6: Volatility (The "Feed" Crimes)

*Violating object permanence and user intent.*

### 22. Feed Roulette

**The Crime:** Accidental refresh or "back" button wipes the content you were looking at, replacing it with a new algorithmic feed.

**The Philosophy:** Prioritizes "Freshness" (Engagement) over "Utility" (Retrieval). Treats user attention as disposable.

**Haltija Signature:**
1. \`scanVisibleContent()\` → Store IDs of first 5 items
2. Trigger \`reload\` or click "Home"
3. \`scanVisibleContent()\` again
4. If < 50% of original items present → **Crime: "Volatile Content Environment"**

---

### 23. The Gaslighting Scroll (Bi-Directional Virtualization)

**The Crime:** You're 500 items deep. You scroll up to check something you saw 30 seconds ago. The browser jumps, content re-orders, you can't find your place.

**The Philosophy:** Humans rely on spatial memory ("It was up and to the left"). Virtual scrolling breaks this map.

**Haltija Signature:**
1. Scroll down 50 viewport heights
2. Scroll up 10 viewport heights quickly
3. Monitor \`scroll\` events vs \`visualViewport\` offset
4. If scroll position jumps (>100px without user input) → **Crime**
5. If \`layout-shift\` score spikes during scroll-up → **Crime**

---

### 24. Deceptive Loading (Skeleton Lie)

**The Crime:** Skeleton screen shows a layout, but final content shifts positions significantly (CLS) or buttons remain disabled after appearing ready.

**The Philosophy:** The UI promises interaction ("I am loading right here") but delivers a moving target.

**Haltija Signature:**
- Compare \`boundingClientRect\` of skeleton elements vs. final content
- If shift > 10px → **Crime: "Deceptive Loading State"**

---

## Implementation: The "Rap Sheet"

When Haltija runs a test plan, output a **Criminal Record** alongside functional results:

\`\`\`
Summary:
- Functional: PASSED (Login works)
- UX Audit: FAILED

Crimes Detected:
1. FELONY: Paste Blockade on Password Field
2. MISDEMEANOR: Tiny Tap Target on "Forgot Password" link (12px height)
3. INTERACTION VIOLATION: Country picker lacks typeahead
4. DARK PATTERN: Cancel button is 10px grey text link
\`\`\`

This gives engineers/designers **exact ammunition** for the next meeting.

---

## Why Agents Hate These Even More Than Humans

To an AI Agent, **The Feed is Kryptonite.**

- Agents act linearly: "I saw a shoe I liked. I will scroll back up to buy it."
- If scrolling up makes the shoe vanish (Virtual Scroll) or reloading changes inventory (Feed Roulette), the Agent fails.

**The Haltija Advantage:**
Because Haltija acts as a **Context History Stream** (Semantic Events), it solves this:

- **The Site:** Deletes DOM node for "Post #101" because you scrolled past it
- **Haltija:** Remembers "Post #101" was seen at \`timestamp: 10:05\`
- **The Feature:** When Agent asks "Where is that post?", Haltija says: *"The site deleted it (Virtual Scroll), but I have the data. Don't scroll up; use Search instead."*

You are building **the memory that the modern web tries to erase**.

---

## Class 7: Mobile Hostility

*Crimes committed by developers who only test on a 27-inch monitor with a mouse.*

### 25. The Pinch-to-Zoom Lock

**The Crime:** Disabling zoom because it "messes up the design." This actively prevents users with vision impairments (or anyone in bright sunlight) from reading your content.

**Haltija Signature:**
- Scan \`<meta name="viewport">\`
- Look for \`user-scalable=no\` or \`maximum-scale=1.0\`

**Report:** "Viewport Violation: Zoom disabled. Accessibility failure for low-vision users."

---

### 26. The Hover Trap

**The Crime:** Hiding critical actions (like "Edit" or "Delete" buttons) or navigation sub-menus behind a \`:hover\` state.

**The Reality:** There is no hover on touchscreens. The user has to awkwardly tap once to see the menu (which might interpret the tap as a click and navigate away immediately).

**Haltija Signature:**
- Identify elements with \`mouseover\` or \`:hover\` listeners that change visibility of child elements
- **Heuristic:** Can the Agent access the child element via a single \`click\` or \`focus\` event without triggering navigation?

**Report:** "Touchscreen Exclusion: Critical UI hidden behind Hover state. Inaccessible on mobile."

---

### 27. The Keyboard Eclipse

**The Crime:** Tapping an input field brings up the on-screen keyboard, which completely covers the input field you are typing in.

**Haltija Signature:**
- **Simulation:** Set viewport height to 50% (simulating keyboard)
- **Action:** Focus an input in the bottom half of the page
- **Check:** Is the input element's \`bottom\` coordinate > visible viewport height? Does the page fail to scroll it into view?

**Report:** "Input Occlusion: Active field hidden by virtual keyboard."

---

### 28. The Fat Finger Minefield

**The Crime:** Placing two actionable elements (e.g., "Save" and "Cancel", or list items) closer than 8px apart.

**Haltija Signature:**
- Scan all \`button\`, \`a\`, \`input\`
- Compute bounding boxes
- **Check:** If distance between edges of two interactive targets is < 8px → **Crime**

**Report:** "Touch Target Risk: Interactive elements too close. High probability of accidental clicks."

---

### 29. The Horizontal Scroll of Death

**The Crime:** A single element (like a long URL or code block) is wider than the mobile viewport, causing the *entire page* to wobble left and right.

**Haltija Signature:**
- Set viewport width to 375px (iPhone SE)
- **Check:** Is \`document.body.scrollWidth\` > \`window.innerWidth\`?

**Report:** "Layout Failure: Page overflows horizontally. Causes unstable scrolling."

---

## Class 8: Accessibility Atrocities

*Basic exclusions that are often illegal and always unethical.*

### 30. The Silent Image

**The Crime:** Meaningful images (not decorative) missing \`alt\` text. Screen readers just say "Image" or read the filename "DSC_0043.jpg".

**Haltija Signature:**
- Query \`img:not([alt])\`
- Filter out \`role="presentation"\` or empty \`alt=""\` (if decorative)

**Report:** "Blind Spot: Meaningful image missing alternative text."

---

### 31. The Color-Only Signal

**The Crime:** Using *only* red text or a red border to indicate an error, with no icon or text label explaining "Invalid".

**The Reality:** Colorblind users cannot see the error.

**Haltija Signature:**
- Trigger form error
- **Check:** Did a new text node appear or did \`aria-invalid\` toggle?
- **Failure:** If only CSS \`color\` or \`border-color\` changed → **Crime**

**Report:** "Sensory Reliance: Error state conveyed solely by color. Invisible to colorblind users."

---

### 32. The Low Contrast Grey

**The Crime:** Light grey text on a white background (e.g., \`#999\` on \`#fff\`). The designer thinks it looks "clean." Users think it looks "invisible."

**Haltija Signature:**
- **Heuristic:** Compute background color and foreground color of all text nodes
- **Math:** Calculate luminosity ratio
- If < 4.5:1 (WCAG AA) for normal text → **Crime**

**Report:** "Legibility Failure: Text contrast too low (Ratio X:1)."

---

### 33. The Headings Out of Order

**The Crime:** Using \`<h3>\` because you wanted "medium sized font," skipping \`<h1>\` or \`<h2>\`.

**The Reality:** Screen reader users navigate by headings. A broken hierarchy makes the page structure unintelligible.

**Haltija Signature:**
- Scan heading tags
- Check order (e.g., \`h4\` appears before \`h1\`, or \`h3\` is a direct child of \`h1\` skipping \`h2\`)

**Report:** "Structural Chaos: Semantic heading hierarchy broken."

---

### 34. The Autoplay Assault

**The Crime:** Video or audio that plays automatically on page load.

**The Reality:** This overrides screen reader audio, disorienting blind users, and triggers anxiety/migraines in neurodiverse users.

**Haltija Signature:**
- Check \`<video>\` or \`<audio>\` tags for \`autoplay\` attribute
- Check if \`muted\` is missing

**Report:** "Hostile Media: Unsolicited autoplay detected."

---

### 35. The No Skip Link

**The Crime:** Forcing keyboard users to tab through 50 navigation links on *every single page* before they can reach the content.

**Haltija Signature:**
- **Action:** Press \`Tab\` from page load
- **Check:** Is one of the first 3 focusable elements a link to \`#main\` or \`main\`?

**Report:** "Navigation Fatigue: Missing 'Skip to Content' link."

---

## Implementation Strategy: The Audit Flag

You don't want this running on every fast iteration loop (it generates too much noise).

**Add a flag to the Haltija CLI:**

\`\`\`bash
# Run functional tests only
npx haltija test

# Run with full Criminal Investigation
npx haltija test --audit
\`\`\`

When \`--audit\` is active, the Agent gets the "Criminal Code" system prompt and the Haltija widget activates its "Sensors" (Contrast checker, Layout shift observer, etc.).

This allows teams to separate:
- **"Did we break the build?"** (Functional)
- **"Did we ruin the product?"** (Audit)

---

## The Value Proposition

You aren't just selling a "Tester." You are selling a **Compliance Officer**.

If a company uses Haltija, they aren't just checking if the login button works. They're checking:

- "Did we alienate our European customers today?"
- "Did we break the site for Canada?"
- "Is our mobile menu usable by humans?"

This turns **JSON Test Results** into a **Business Risk Report**. That's worth 10x what a Selenium script is worth.

---

## Severity Levels

| Level | Description | Example |
|-------|-------------|---------|
| **Critical** | Site unusable | Phantom Shield blocking all clicks |
| **Felony** | Major user harm | Paste Blockade on passwords |
| **Misdemeanor** | Friction/annoyance | Tiny tap targets |
| **Violation** | Best practice breach | Missing form labels |
| **Warning** | Potential issue | Country picker lacks typeahead |

---

## Future Additions (Parking Lot)

From original roadmap, not yet codified:

- **CAPTCHA nightmares** - inaccessible, unsolvable
- **Hamburger menus hiding critical actions** - primary nav buried
- **No skip links** - keyboard users trapped in header
- **Hover-dependent UI on mobile** - tooltips/menus that require hover
- **Pinch-zoom disabled** - viewport meta crimes
- **Auto-formatting that fights input** - phone fields that add/remove chars while typing
- **Duplicate country entries** - "UK" vs "Great Britain" vs "United Kingdom"
- **Language selector buried** - in footer? hamburger? settings? random flag icon?
- **Missing lang attribute** - wrong language auto-detected, no way to fix
`

export const API_MD = `# Haltija API Reference

> **Auto-generated from \`src/api-schema.ts\`** - Do not edit directly.

## Quick Start

\`\`\`bash
# Is it working?
curl localhost:8700/status

# What tabs are connected?
curl localhost:8700/windows

# What's on the page?
curl -X POST localhost:8700/tree -d '{"mode":"actionable"}'

# Click something
curl -X POST localhost:8700/click -d '{"selector":"#submit"}'
\`\`\`

---

## Connection & Status

### \`GET /status\`

**Server status**

Returns server info and connected browser count.

Response: { version, uptime, browsers: n, focused?: windowId }

Use to verify server is running and browsers are connected before testing.

---

### \`GET /stats\`

**Efficiency and usage statistics**

Returns metrics showing Haltija's efficiency vs raw DOM events.

Response includes:
- session: { startTime, uptimeMs, uptimeFormatted }
- events: { raw, semantic, reductionPercent, byCategory }
- dom: { processed, inTree, inActionable, reductionPercent }
- refs: { assigned, resolved, stale, hitRate }
- endpoints: { [name]: { calls, success, errors, avgMs } }

Use this to verify efficiency claims (99%+ event reduction, etc.) and debug performance.

---

### \`GET /version\`

**[Deprecated] Use /status instead**

Deprecated: Version is included in /status response.

---

### \`GET /docs\`

**[Deprecated] Use /api instead**

Deprecated: Use /api for complete API documentation.

---

### \`GET /api\`

**Full API reference**

Complete API documentation with all endpoints.

Returns structured JSON with all endpoints, their parameters, and examples.

---

## See the Page

### \`POST /tree\`

**Get DOM tree structure**

Returns hierarchical view of page elements. Best for understanding page structure before interacting.

Response structure:
  { tag, id?, classes?, attrs?, text?, value?, checked?, children?, flags?: { interactive, hidden, hasAria, ... } }

Flags help identify interactive elements (buttons, inputs) and hidden content.
Form inputs include live value/checked state (not just HTML attribute).

Use ancestors:true to see parent elements when inspecting deep elements.

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| \`selector\` | string,null | Root element selector |
| \`depth\` | number,null | Max depth (-1 = unlimited, default 3) |
| \`includeText\` | boolean,null | Include text content (default true) |
| \`visibleOnly\` | boolean,null | Only visible elements (default false) |
| \`pierceShadow\` | boolean,null | Pierce shadow DOM (default true) |
| \`pierceFrames\` | boolean,null | Pierce same-origin iframes (default true) |
| \`compact\` | boolean,null | Minimal output (default false) |
| \`ancestors\` | boolean,null | Include ancestor path from root (default false) |
| \`window\` | string,null | Target window ID |

**Examples:**

- **overview**: Quick page overview
  \`\`\`json
  {"depth":2}
  \`\`\`
- **form-only**: Full form structure
  \`\`\`json
  {"selector":"form","depth":-1}
  \`\`\`
- **visible-buttons**: Find visible interactive elements
  \`\`\`json
  {"selector":"body","visibleOnly":true,"depth":4}
  \`\`\`
- **with-context**: See element with parent context
  \`\`\`json
  {"selector":"#deep-element","ancestors":true}
  \`\`\`

---

### \`POST /query\`

**Query DOM elements by selector**

Quick element lookup. Returns basic info: tagName, id, className, textContent, attributes.

Use this to check if an element exists before clicking/typing. For detailed info, use /inspect instead.

Response: { tagName, id, className, textContent, attributes: {...} }

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| \`selector\` | string | CSS selector *(required)* |
| \`all\` | boolean,null | Return all matches (default false = first only) |

**Examples:**

- **by-id**: Find element by ID
  \`\`\`json
  {"selector":"#submit-btn"}
  \`\`\`
  Response:
  \`\`\`json
  {
    "success": true,
    "data": {
      "tagName": "button",
      "id": "submit-btn",
      "className": "btn primary",
      "textContent": "Submit",
      "attributes": {
        "id": "submit-btn",
        "class": "btn primary",
        "type": "submit"
      }
    }
  }
  \`\`\`
- **all-inputs**: Find all text inputs
  \`\`\`json
  {"selector":"input[type=\\"text\\"]","all":true}
  \`\`\`

---

### \`POST /inspect\`

**Deep inspection of an element**

Get everything about ONE element: geometry, computed styles, ARIA attributes, scroll position, visibility state.

Response includes:
  - box: { x, y, width, height, visible }
  - text: { innerText, value, placeholder }
  - properties: { disabled, checked, hidden, role, ariaLabel, ... }
  - styles: { display, visibility, opacity, ... } (curated subset)
  - allStyles: { ...all computed styles } (only if fullStyles=true)
  - matchedRules: [ { selector, source, specificity, properties } ] (only if matchedRules=true)
  - hierarchy: { parent, children count, depth }

Use before clicking to verify element is visible and enabled.

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| \`selector\` | string | CSS selector *(required)* |
| \`fullStyles\` | boolean,null | Include all computed styles (default: false) |
| \`matchedRules\` | boolean,null | Include matched CSS rules with specificity (default: false) |
| \`window\` | string,null | Target window ID |

**Examples:**

- **check-button**: Verify button is clickable
  \`\`\`json
  {"selector":"#submit"}
  \`\`\`
  Response:
  \`\`\`json
  {
    "success": true,
    "data": {
      "selector": "body > form > button#submit",
      "tagName": "button",
      "classList": [
        "btn",
        "primary"
      ],
      "box": {
        "x": 100,
        "y": 200,
        "width": 120,
        "height": 40,
        "visible": true,
        "display": "inline-block",
        "visibility": "visible",
        "opacity": 1
      },
      "text": {
        "innerText": "Submit",
        "textContent": "Submit",
        "innerHTML": "Submit"
      },
      "attributes": {
        "id": "submit",
        "class": "btn primary",
        "type": "submit"
      },
      "properties": {
        "disabled": false,
        "hidden": false,
        "type": "submit"
      },
      "hierarchy": {
        "parent": "form#login",
        "children": 0,
        "depth": 4
      },
      "styles": {
        "display": "inline-block",
        "visibility": "visible",
        "opacity": "1"
      }
    }
  }
  \`\`\`
- **check-input**: Get input state and value
  \`\`\`json
  {"selector":"input[name=\\"email\\"]"}
  \`\`\`

---

### \`POST /inspectAll\`

**Inspect multiple elements**

Deep inspection of ALL elements matching selector (up to limit).

Same detailed info as /inspect, but for multiple elements. Great for:
  - Finding all buttons/links on a page
  - Checking which form fields are required
  - Listing all interactive elements

Response: array of inspection objects

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| \`selector\` | string | CSS selector *(required)* |
| \`limit\` | number,null | Max elements (default 10) |
| \`fullStyles\` | boolean,null | Include all computed styles (default: false) |
| \`matchedRules\` | boolean,null | Include matched CSS rules with specificity (default: false) |
| \`window\` | string,null | Target window ID |

**Examples:**

- **all-buttons**: Find all clickable buttons
  \`\`\`json
  {"selector":"button, [role=\\"button\\"]","limit":20}
  \`\`\`
- **form-fields**: List all form inputs
  \`\`\`json
  {"selector":"input, select, textarea"}
  \`\`\`
- **nav-links**: Get navigation links
  \`\`\`json
  {"selector":"nav a","limit":15}
  \`\`\`

---

### \`POST /find\`

**Find elements by text content**

Search for elements containing specific text. Saves writing querySelector + filter patterns.

Returns first match by default, or all matches with all:true.

Response: { found: true, selector: "...", element: {...} } or { found: true, elements: [...] }

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| \`text\` | string | Text to search for (substring match) *(required)* |
| \`tag\` | string,null | Limit to specific tag (button, a, div, etc) |
| \`exact\` | boolean,null | Require exact text match (default false = substring) |
| \`all\` | boolean,null | Return all matches (default false = first only) |
| \`visible\` | boolean,null | Only visible elements (default true) |
| \`window\` | string,null | Target window ID |

**Examples:**

- **button-by-text**: Find Submit button
  \`\`\`json
  {"text":"Submit","tag":"button"}
  \`\`\`
- **link-by-text**: Find link by text
  \`\`\`json
  {"text":"Learn more","tag":"a"}
  \`\`\`
- **exact-match**: Find button with exact "OK" text
  \`\`\`json
  {"text":"OK","tag":"button","exact":true}
  \`\`\`
- **all-matches**: Find all Delete buttons
  \`\`\`json
  {"text":"Delete","tag":"button","all":true}
  \`\`\`
- **any-element**: Find any element containing "Error:"
  \`\`\`json
  {"text":"Error:"}
  \`\`\`

---

### \`POST /form\`

**Extract all form values as structured JSON**

Get all form field values without needing to know the component's API.

Introspects forms and returns structured data:
- Input values (text, email, password, etc.)
- Checkbox/radio states
- Select values (single and multiple)
- Textarea content
- Custom form elements with value property

Response: { fields: { name: value, ... }, form: { action, method, id } }

Works with standard forms and most framework components (React, Vue, etc).

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| \`selector\` | string,null | Form selector (default: first form on page) |
| \`includeDisabled\` | boolean,null | Include disabled fields (default false) |
| \`includeHidden\` | boolean,null | Include hidden fields (default false) |
| \`window\` | string,null | Target window ID |

**Examples:**

- **first-form**: Get data from first form
  \`\`\`json
  {}
  \`\`\`
- **by-id**: Get specific form data
  \`\`\`json
  {"selector":"#login-form"}
  \`\`\`
- **with-hidden**: Include hidden fields like CSRF tokens
  \`\`\`json
  {"selector":"form","includeHidden":true}
  \`\`\`

---

## Do Things

### \`POST /click\`

**Click an element**

Scrolls element into view, then performs full click sequence: mouseenter, mouseover, mousedown, mouseup, click.

Three ways to target elements:
- ref: Ref ID from /tree output (e.g., 1, 42) - fastest, survives DOM changes
- selector: CSS selector (traditional)
- text + tag: Find by text content (more reliable for dynamic UIs)

Options:
- autoWait: Wait for element to appear before clicking (default false). Eliminates need for separate /wait call.
- diff: Return what changed after the click (added/removed elements, attribute changes)

Automatically fails if element is not found or is disabled. Check response.success to verify.

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| \`ref\` | string,null | Ref ID from /tree output (e.g., 1, 42) - preferred for efficiency |
| \`selector\` | string,null | CSS selector of element to click |
| \`text\` | string,null | Text content to find (alternative to selector) |
| \`tag\` | string,null | Tag name when using text (default: any clickable element) |
| \`autoWait\` | boolean,null | Wait for element to appear before clicking (default false) |
| \`timeout\` | number,null | Max wait time in ms when autoWait is true (default 5000) |
| \`diff\` | boolean,null | Return DOM diff showing what changed after click (default false) |
| \`diffDelay\` | number,null | Wait ms before capturing "after" state (default 100) |
| \`window\` | string,null | Target window ID |

**Examples:**

- **by-ref**: Click by ref from /tree (fastest)
  \`\`\`json
  {"ref":"42"}
  \`\`\`
- **by-id**: Click button by ID
  \`\`\`json
  {"selector":"#submit"}
  \`\`\`
- **by-class**: Click by class
  \`\`\`json
  {"selector":".btn-primary"}
  \`\`\`
- **by-text**: Click element containing "Save"
  \`\`\`json
  {"text":"Save"}
  \`\`\`
- **button-by-text**: Click button by text
  \`\`\`json
  {"text":"Submit","tag":"button"}
  \`\`\`
- **link-by-text**: Click link by text
  \`\`\`json
  {"text":"Learn more","tag":"a"}
  \`\`\`
- **by-role**: Click by ARIA
  \`\`\`json
  {"selector":"[role=\\"button\\"][aria-label=\\"Close\\"]"}
  \`\`\`
- **with-diff**: Click and see what changed
  \`\`\`json
  {"selector":".add-item","diff":true}
  \`\`\`
- **auto-wait**: Wait for element then click
  \`\`\`json
  {"selector":".modal-button","autoWait":true}
  \`\`\`
- **auto-wait-timeout**: Wait up to 10s for element
  \`\`\`json
  {"selector":".slow-element","autoWait":true,"timeout":10000}
  \`\`\`

---

### \`POST /type\`

**Type text into an element**

Focus element and type text character by character with realistic event lifecycle.

Target element via ref (from /tree output) or selector.

Simulates real user behavior:
1. Focus via mouse click (default) or keyboard Tab
2. Full keystroke events: keydown → beforeinput → input → keyup
3. Fires change event on completion

Handles native inputs, textareas, contenteditable, and framework-wrapped inputs (React, MUI, etc).

Options:
- autoWait: Wait for element to appear before typing (default false). Eliminates need for separate /wait call.
- humanlike: Add realistic delays and occasional typos (default true)
- focusMode: How to focus the element before typing
  - "mouse" (default): Full mouse lifecycle (mouseenter → click → focus)
  - "keyboard": Tab key navigation (for accessibility testing)
  - "direct": Just .focus() (fast, for simple tests)
- clear: Clear existing content before typing (default false)

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| \`ref\` | string,null | Ref ID from /tree output (e.g., 1, 42) - preferred for efficiency |
| \`selector\` | string,null | CSS selector of input/textarea/contenteditable |
| \`text\` | string | Text to type *(required)* |
| \`autoWait\` | boolean,null | Wait for element to appear before typing (default false) |
| \`timeout\` | number,null | Max wait time in ms when autoWait is true (default 5000) |
| \`humanlike\` | boolean,null | Human-like delays and typos (default true) |
| \`focusMode\` | string,null | How to focus: mouse (default), keyboard, or direct |
| \`clear\` | boolean,null | Clear existing content before typing (default false) |
| \`blur\` | boolean,null | Blur element after typing to trigger change event (default true) |
| \`typoRate\` | number,null | Typo probability 0-1 (default 0.03) |
| \`minDelay\` | number,null | Min ms between keys (default 50) |
| \`maxDelay\` | number,null | Max ms between keys (default 150) |
| \`diff\` | boolean,null | Return DOM diff showing what changed after typing (default false) |
| \`diffDelay\` | number,null | Wait ms before capturing "after" state (default 100) |
| \`window\` | string,null | Target window ID |

**Examples:**

- **email**: Type email address
  \`\`\`json
  {"selector":"#email","text":"user@example.com"}
  \`\`\`
- **password**: Type password
  \`\`\`json
  {"selector":"input[type=\\"password\\"]","text":"secret123"}
  \`\`\`
- **fast-test**: Fast typing for tests
  \`\`\`json
  {"selector":"input","text":"hello","humanlike":false,"focusMode":"direct"}
  \`\`\`
- **keyboard-focus**: Focus via Tab key
  \`\`\`json
  {"selector":"#search","text":"query","focusMode":"keyboard"}
  \`\`\`
- **clear-first**: Clear field then type
  \`\`\`json
  {"selector":"#name","text":"New Name","clear":true}
  \`\`\`
- **contenteditable**: Type into contenteditable
  \`\`\`json
  {"selector":"[contenteditable]","text":"Hello world"}
  \`\`\`

---

### \`POST /key\`

**Send keyboard input**

Send key press with full event lifecycle: keydown → keypress → beforeinput → input → keyup.

Target element defaults to document.activeElement. Use ref or selector to focus a specific element first.

Supports modifiers (ctrlKey, shiftKey, altKey, metaKey) and repeat count for holding keys.

Common keys: Enter, Escape, Tab, ArrowUp/Down/Left/Right, Backspace, Delete, Home, End, PageUp/PageDown, F1-F12, or any printable character.

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| \`key\` | string | Key to press (e.g., "Enter", "Escape", "a", "ArrowDown") *(required)* |
| \`ref\` | string,null | Ref ID from /tree output (e.g., 1, 42) - preferred for efficiency |
| \`selector\` | string,null | Element to focus first (default: activeElement) |
| \`ctrlKey\` | boolean,null | Hold Ctrl/Control |
| \`shiftKey\` | boolean,null | Hold Shift |
| \`altKey\` | boolean,null | Hold Alt/Option |
| \`metaKey\` | boolean,null | Hold Meta/Command |
| \`repeat\` | number,null | Repeat count for key hold (default 1) |
| \`window\` | string,null | Target window ID |

**Examples:**

- **escape**: Close modal/cancel
  \`\`\`json
  {"key":"Escape"}
  \`\`\`
- **enter**: Submit form
  \`\`\`json
  {"key":"Enter"}
  \`\`\`
- **save**: Ctrl+S save shortcut
  \`\`\`json
  {"key":"s","ctrlKey":true}
  \`\`\`
- **tab**: Tab from element
  \`\`\`json
  {"key":"Tab","selector":"#first-input"}
  \`\`\`
- **shift-tab**: Shift+Tab backwards
  \`\`\`json
  {"key":"Tab","shiftKey":true}
  \`\`\`
- **arrow-nav**: Navigate down 3 times
  \`\`\`json
  {"key":"ArrowDown","repeat":3}
  \`\`\`
- **select-all**: Ctrl+A in element
  \`\`\`json
  {"key":"a","ctrlKey":true,"selector":"#editor"}
  \`\`\`

---

### \`POST /drag\`

**Drag from an element**

Simulates drag gesture: mousedown on element, mousemove by delta, mouseup.

Good for: sliders, resize handles, drag-and-drop reordering, range inputs.

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| \`selector\` | string | CSS selector of drag handle *(required)* |
| \`deltaX\` | number,null | Horizontal distance in pixels |
| \`deltaY\` | number,null | Vertical distance in pixels |
| \`duration\` | number,null | Drag duration in ms (default 300) |
| \`window\` | string,null | Target window ID |

**Examples:**

- **slider-right**: Move slider right
  \`\`\`json
  {"selector":".slider-handle","deltaX":100}
  \`\`\`
- **resize**: Resize element
  \`\`\`json
  {"selector":".resize-handle","deltaX":50,"deltaY":50}
  \`\`\`
- **reorder**: Drag item down in list
  \`\`\`json
  {"selector":".drag-item","deltaY":80}
  \`\`\`

---

### \`POST /highlight\`

**Visually highlight an element**

Draw attention to an element with colored border and optional label.

Great for showing users what you found or pointing out issues. Use /unhighlight to remove.

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| \`selector\` | string | CSS selector *(required)* |
| \`label\` | string,null | Label text to show |
| \`color\` | string,null | CSS color (default #6366f1) |
| \`duration\` | number,null | Auto-hide after ms (omit for manual) |
| \`window\` | string,null | Target window ID |

**Examples:**

- **point-out**: Show user where to click
  \`\`\`json
  {"selector":"#login-btn","label":"Click here"}
  \`\`\`
- **error-red**: Highlight error in red
  \`\`\`json
  {"selector":".error","label":"Problem","color":"#ef4444"}
  \`\`\`
- **temporary**: Auto-hide after 3s
  \`\`\`json
  {"selector":"button","duration":3000}
  \`\`\`

---

### \`POST /unhighlight\`

**Remove highlight**

Remove any active highlight overlay created by /highlight.

---

### \`POST /scroll\`

**Scroll to element or position**

Smooth scroll with natural easing. Multiple modes:

- selector: Scroll element into view (most common)
- x/y: Scroll to absolute position
- deltaX/deltaY: Scroll relative to current position

At least one of selector, x, y, deltaX, or deltaY must be provided.

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| \`selector\` | string,null | CSS selector to scroll into view |
| \`x\` | number,null | Absolute X position in pixels |
| \`y\` | number,null | Absolute Y position in pixels |
| \`deltaX\` | number,null | Relative horizontal scroll in pixels |
| \`deltaY\` | number,null | Relative vertical scroll in pixels |
| \`duration\` | number,null | Animation duration in ms (default 500) |
| \`easing\` | string,null | Easing function: ease-out (default), ease-in-out, linear |
| \`block\` | string,null | Vertical alignment: center (default), start, end, nearest |
| \`window\` | string,null | Target window ID |

**Examples:**

- **to-element**: Scroll pricing section into view
  \`\`\`json
  {"selector":"#pricing"}
  \`\`\`
- **to-top**: Scroll to top of page
  \`\`\`json
  {"y":0}
  \`\`\`
- **to-bottom**: Scroll to footer
  \`\`\`json
  {"selector":"footer"}
  \`\`\`
- **down-500**: Scroll down 500px
  \`\`\`json
  {"deltaY":500}
  \`\`\`
- **slow-scroll**: Slow animated scroll
  \`\`\`json
  {"selector":"#section","duration":1000,"easing":"ease-in-out"}
  \`\`\`

---

### \`POST /wait\`

**Wait for time, element, or condition**

Flexible wait for async UI scenarios. Multiple modes:

- ms: Wait for a fixed time (simple delay)
- forElement: Poll until element appears (or disappears with hidden:true)
- Both: Wait for element, then add extra ms delay

All modes support timeout (default 5000ms). Returns immediately if condition already met.

Response: { success: true, waited: ms, found?: boolean }

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| \`ms\` | number,null | Milliseconds to wait |
| \`forElement\` | string,null | CSS selector to wait for |
| \`hidden\` | boolean,null | Wait for element to disappear (default false) |
| \`timeout\` | number,null | Max wait time in ms (default 5000) |
| \`pollInterval\` | number,null | Polling interval in ms (default 100) |
| \`window\` | string,null | Target window ID |

**Examples:**

- **delay**: Simple 500ms delay
  \`\`\`json
  {"ms":500}
  \`\`\`
- **for-element**: Wait for modal to appear
  \`\`\`json
  {"forElement":".modal"}
  \`\`\`
- **for-hidden**: Wait for loading to disappear
  \`\`\`json
  {"forElement":".loading","hidden":true}
  \`\`\`
- **with-timeout**: Wait up to 10s
  \`\`\`json
  {"forElement":"button[data-ready]","timeout":10000}
  \`\`\`
- **element-plus-delay**: Wait for dropdown, then 100ms for animation
  \`\`\`json
  {"forElement":".dropdown","ms":100}
  \`\`\`

---

### \`POST /call\`

**Call a method or get a property on an element**

Call a method or access a property on an element by selector. Convenience wrapper around /eval.

This avoids writing querySelector boilerplate. Two modes:
- With args (even empty []): Calls element.method(...args)
- Without args: Returns element.property value

Return value is JSON-serialized. Promises are awaited.

Response: { success: true, data: <return value> }

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| \`selector\` | string | CSS selector of the element *(required)* |
| \`method\` | string | Method name to call or property name to get *(required)* |
| \`args\` | array,null | Arguments to pass (omit to get property value) |
| \`window\` | string,null | Target window ID |

**Examples:**

- **get-value**: Get input value
  \`\`\`json
  {"selector":"#email","method":"value"}
  \`\`\`
- **get-checked**: Get checkbox state
  \`\`\`json
  {"selector":"#agree","method":"checked"}
  \`\`\`
- **get-inner-html**: Get element HTML
  \`\`\`json
  {"selector":"#content","method":"innerHTML"}
  \`\`\`
- **get-dataset**: Get data attributes
  \`\`\`json
  {"selector":"#item","method":"dataset"}
  \`\`\`
- **get-open**: Check if dialog is open
  \`\`\`json
  {"selector":"dialog","method":"open"}
  \`\`\`
- **show-popover**: Show a popover element
  \`\`\`json
  {"selector":"#my-popover","method":"showPopover","args":[]}
  \`\`\`
- **hide-popover**: Hide a popover element
  \`\`\`json
  {"selector":"#my-popover","method":"hidePopover","args":[]}
  \`\`\`
- **play-video**: Play a video element
  \`\`\`json
  {"selector":"video","method":"play","args":[]}
  \`\`\`
- **focus**: Focus an input element
  \`\`\`json
  {"selector":"#email","method":"focus","args":[]}
  \`\`\`
- **scroll-into-view**: Scroll with options
  \`\`\`json
  {"selector":"#section","method":"scrollIntoView","args":[{"behavior":"smooth"}]}
  \`\`\`
- **set-attribute**: Set an attribute
  \`\`\`json
  {"selector":"#btn","method":"setAttribute","args":["disabled","true"]}
  \`\`\`
- **get-bounding-rect**: Get element geometry
  \`\`\`json
  {"selector":"#box","method":"getBoundingClientRect","args":[]}
  \`\`\`

---

## Navigate

### \`POST /navigate\`

**Navigate to a URL**

Navigate the browser to a new URL. Waits for page load to complete.

Use /location after to verify navigation succeeded.

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| \`url\` | string | URL to navigate to *(required)* |
| \`window\` | string,null | Target window ID |

**Examples:**

- **full-url**: Navigate to full URL
  \`\`\`json
  {"url":"https://example.com/login"}
  \`\`\`
- **relative**: Navigate to relative path
  \`\`\`json
  {"url":"/dashboard"}
  \`\`\`

---

### \`POST /refresh\`

**Refresh the page**

Hard reload the current page, bypassing cache. Use soft: true for cache-friendly reload.

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| \`soft\` | boolean,null | Use cached resources if available (default false = hard refresh) |
| \`window\` | string,null | Target window ID |

**Examples:**

- **hard**: Hard refresh (default, bypasses cache)
  \`\`\`json
  {}
  \`\`\`
- **soft**: Soft refresh (uses cache)
  \`\`\`json
  {"soft":true}
  \`\`\`

---

### \`GET /location\`

**Get current URL and title**

Returns current page info.

Response: { url, title, pathname, search, hash }

Use after /navigate to verify you're on the expected page.

---

## Watch What Happens

### \`POST /events/watch\`

**Start watching semantic events**

Begin capturing high-level user actions. Events are aggregated and meaningful:
- "user typed 'hello@example.com'" not 18 keydown events
- "user clicked Submit" not mousedown/mouseup/click

Presets control verbosity:
- minimal: clicks, submits, navigation only
- interactive: + hovers on buttons, form changes (recommended)
- detailed: + all element interactions
- debug: everything

Categories: interaction, navigation, input, hover, scroll, mutation, focus, console

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| \`preset\` | string,null | Verbosity: minimal, interactive, detailed, debug |
| \`categories\` | array,null | Specific categories to watch |

**Examples:**

- **default**: Recommended for most use cases
  \`\`\`json
  {"preset":"interactive"}
  \`\`\`
- **minimal**: Only clicks and navigation
  \`\`\`json
  {"preset":"minimal"}
  \`\`\`
- **custom**: Specific categories
  \`\`\`json
  {"categories":["interaction","input","console"]}
  \`\`\`

---

### \`POST /events/unwatch\`

**Stop watching events**

Stop capturing semantic events. Events buffer is cleared.

---

### \`GET /events\`

**Get captured semantic events**

Returns buffered events since watch started.

Response: { events: [{ type, timestamp, category, target?, payload }], since, count }

Event types: interaction:click, input:typed, navigation:navigate, hover:dwell, scroll:stop, etc.

---

### \`GET /events/stats\`

**Get event aggregation statistics**

Shows noise reduction metrics.

Response: { rawEvents, semanticEvents, reductionPercent, byCategory: {...} }

Typically see 90%+ reduction (e.g., 2000 raw events → 80 semantic events).

---

## Watch DOM Changes

### \`POST /mutations/watch\`

**Start watching DOM mutations**

Begin capturing DOM changes: elements added/removed, attributes changed, text modified.

Presets filter out framework noise:
- smart (default): Auto-detects React, Tailwind, etc.
- minimal: Only element add/remove
- none: Everything (noisy)

Get captured mutations via /mutations/status.

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| \`root\` | string,null | Root selector to watch (default body) |
| \`childList\` | boolean,null | Watch child additions/removals (default true) |
| \`attributes\` | boolean,null | Watch attribute changes (default true) |
| \`characterData\` | boolean,null | Watch text content changes (default false) |
| \`subtree\` | boolean,null | Watch all descendants (default true) |
| \`debounce\` | number,null | Debounce ms (default 100) |
| \`preset\` | string,null | Filter preset: smart, xinjs, b8rjs, tailwind, react, minimal, none |
| \`filters\` | ,null | Custom filter configuration |
| \`pierceShadow\` | boolean,null | Watch inside shadow DOM (default false) |

**Examples:**

- **default**: Watch all DOM changes with smart filtering
  \`\`\`json
  {}
  \`\`\`
- **form-only**: Watch form for new elements
  \`\`\`json
  {"root":"form","preset":"minimal"}
  \`\`\`
- **react-app**: Filter React internals
  \`\`\`json
  {"preset":"react"}
  \`\`\`

---

### \`POST /mutations/unwatch\`

**Stop watching mutations**

Stop capturing DOM mutations. Call this when done to free resources.

---

### \`GET /mutations/status\`

**Get mutation watch status**

Check if mutation watching is active and get captured mutations.

Response: { watching: boolean, mutations: [...], summary: { added, removed, changed } }

---

## User Selection

### \`POST /select\`

**Interactive element selection**

Let user point at elements on the page instead of writing selectors.

Actions:
- start: Begin selection mode (user can draw a rectangle)
- result: Get elements from completed selection
- cancel: Exit selection mode without capturing
- clear: Clear stored selection result
- status: Check if selection is active

Workflow: start → (user draws region) → result → use returned selectors

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| \`action\` | string,null | Selection action to perform (default: result) |
| \`window\` | string,null | Target window ID |

**Examples:**

- **start**: Begin selection mode
  \`\`\`json
  {"action":"start"}
  \`\`\`
- **result**: Get selected elements
  \`\`\`json
  {"action":"result"}
  \`\`\`
- **status**: Check if selection is active
  \`\`\`json
  {"action":"status"}
  \`\`\`

---

### \`POST /select/start\`

**[Deprecated] Use /select with action:"start"**

Deprecated: Use POST /select {"action":"start"} instead.

---

### \`POST /select/cancel\`

**[Deprecated] Use /select with action:"cancel"**

Deprecated: Use POST /select {"action":"cancel"} instead.

---

### \`GET /select/status\`

**[Deprecated] Use /select with action:"status"**

Deprecated: Use POST /select {"action":"status"} instead.

---

### \`GET /select/result\`

**[Deprecated] Use /select with action:"result"**

Deprecated: Use POST /select {"action":"result"} instead.

---

### \`POST /select/clear\`

**[Deprecated] Use /select with action:"clear"**

Deprecated: Use POST /select {"action":"clear"} instead.

---

## Multiple Tabs

### \`GET /windows\`

**List connected windows**

Returns all connected browser windows/tabs with IDs, URLs, and titles.

Response: { windows: [{ id, url, title, focused }] }

Use window IDs in other endpoints (e.g., /click, /tree) to target specific tabs.

---

### \`POST /tabs/open\`

**Open a new tab**

Desktop app only. Opens a new tab with optional URL.

If url is omitted, opens a blank tab. The new tab gets the widget auto-injected.

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| \`url\` | string,null | URL to open |

**Examples:**

- **blank**: Open blank tab
  \`\`\`json
  {}
  \`\`\`
- **with-url**: Open tab with URL
  \`\`\`json
  {"url":"https://example.com"}
  \`\`\`

---

### \`POST /tabs/close\`

**Close a tab**

Desktop app only. Closes the specified tab by window ID.

Get window IDs from /windows endpoint.

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| \`window\` | string | Window ID to close *(required)* |

**Examples:**

- **close**: Close specific tab
  \`\`\`json
  {"window":"window-abc123"}
  \`\`\`

---

### \`POST /tabs/focus\`

**Focus a tab**

Desktop app only. Brings the specified tab to front.

Useful when working with multiple tabs to ensure the right one is visible.

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| \`window\` | string | Window ID to focus *(required)* |

**Examples:**

- **focus**: Bring tab to front
  \`\`\`json
  {"window":"window-abc123"}
  \`\`\`

---

## Record & Replay

### \`POST /recording\`

**Record user actions and generate tests**

Record user interactions and convert them to runnable tests.

**Cross-page recording**: Recordings now survive page navigations! The server tracks
the recording session by window ID, so you can record a multi-page flow (e.g., login → dashboard).

Actions:
- start: Begin capturing user interactions (survives page navigations)
- stop: Stop capturing, returns all recorded events including from previous pages
- status: Check if recording is active and get event count
- generate: Convert recording to JSON test format
- list: List all saved recordings (with index numbers for replay)
- replay: Replay a saved recording by index or ID

Workflow: start → (user interacts, navigates pages) → stop → list → replay

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| \`action\` | string | Recording action to perform *(required)* |
| \`name\` | string,null | Test name (for generate action) |
| \`id\` | string,null | Recording ID or index number (for replay action) |
| \`window\` | string,null | Target window ID |

**Examples:**

- **start**: Begin recording (survives page navigations)
  \`\`\`json
  {"action":"start"}
  \`\`\`
- **stop**: Stop and get all events
  \`\`\`json
  {"action":"stop"}
  \`\`\`
- **status**: Check recording status and event count
  \`\`\`json
  {"action":"status"}
  \`\`\`
- **generate**: Generate test from recording
  \`\`\`json
  {"action":"generate","name":"Login flow"}
  \`\`\`
- **list**: List saved recordings with indices
  \`\`\`json
  {"action":"list"}
  \`\`\`
- **replay by index**: Replay most recent recording
  \`\`\`json
  {"action":"replay","id":"0"}
  \`\`\`
- **replay by ID**: Replay recording by ID
  \`\`\`json
  {"action":"replay","id":"rec_123456_abc"}
  \`\`\`

---

### \`POST /recording/start\`

**[Deprecated] Use /recording with action:"start"**

Deprecated: Use POST /recording {"action":"start"} instead.

---

### \`POST /recording/stop\`

**[Deprecated] Use /recording with action:"stop"**

Deprecated: Use POST /recording {"action":"stop"} instead.

---

### \`POST /recording/generate\`

**[Deprecated] Use /recording with action:"generate"**

Deprecated: Use POST /recording {"action":"generate"} instead.

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| \`name\` | string,null | Test name |

---

### \`GET /recordings\`

**[Deprecated] Use /recording with action:"list"**

Deprecated: Use POST /recording {"action":"list"} instead.

---

## Run Tests

### \`POST /test/run\`

**Run a JSON test**

Execute a test defined in Haltija JSON format.

Test structure:
{
  "version": 1,
  "name": "Login flow",
  "url": "http://localhost:3000/login",
  "steps": [
    { "action": "type", "selector": "#email", "text": "user@example.com" },
    { "action": "type", "selector": "#password", "text": "secret123" },
    { "action": "click", "selector": "button[type=submit]" },
    { "action": "assert", "assertion": { "type": "url", "pattern": "/dashboard" } }
  ]
}

Step actions: navigate, click, type, key, wait, assert, eval, verify

Output formats:
- json: Structured result with step-by-step details
- github: Annotations for GitHub Actions + markdown summary
- human: Colored terminal output

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| \`test\` | any | Test object with steps *(required)* |
| \`format\` | string,null | Output format: json (structured), github (annotations + summary), human (readable) |
| \`stepDelay\` | number,null | Milliseconds between steps (default 100) |
| \`timeout\` | number,null | Milliseconds timeout per step (default 5000) |
| \`stopOnFailure\` | boolean,null | Stop on first failure (default true) |
| \`patience\` | number,null | Total failures allowed before giving up (0 = use stopOnFailure, default 0) |
| \`patienceStreak\` | number,null | Consecutive failures to bail immediately (default 2) |
| \`timeoutBonusMs\` | number,null | Ms added/removed from timeout on success/failure, capped at initial (default 1000) |

**Examples:**

- **simple-test**: Simple click and verify
  \`\`\`json
  {"test":{"version":1,"name":"Click button","url":"http://localhost:3000","steps":[{"action":"click","selector":"#submit"},{"action":"assert","assertion":{"type":"exists","selector":".success"}}]}}
  \`\`\`
- **github-output**: Get GitHub Actions format
  \`\`\`json
  {"test":{"version":1,"name":"Test","url":"http://localhost:3000","steps":[]},"format":"github"}
  \`\`\`

---

### \`POST /test/suite\`

**Run multiple tests**

Execute a suite of tests, optionally stopping on first failure.

Input: { tests: [test1, test2, ...], format?, stopOnFailure? }

Response includes per-test results and overall summary.

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| \`tests\` | array | Array of test objects *(required)* |
| \`format\` | string,null | Output format: json (structured), github (annotations + summary), human (readable) |
| \`testDelay\` | number,null | Milliseconds between tests (default 500) |
| \`stepDelay\` | number,null | Milliseconds between steps (default 100) |
| \`timeout\` | number,null | Milliseconds timeout per step (default 5000) |
| \`stopOnFailure\` | boolean,null | Stop on first failure (default false for suites) |
| \`patience\` | number,null | Total failures allowed per test before giving up (0 = use stopOnFailure, default 0) |
| \`patienceStreak\` | number,null | Consecutive failures to bail immediately (default 2) |
| \`timeoutBonusMs\` | number,null | Ms added/removed from timeout on success/failure, capped at initial (default 1000) |

**Examples:**

- **two-tests**: Run two tests, continue on failure
  \`\`\`json
  {"tests":[{"version":1,"name":"Login","url":"http://localhost:3000/login","steps":[]},{"version":1,"name":"Dashboard","url":"http://localhost:3000/dashboard","steps":[]}],"stopOnFailure":false}
  \`\`\`

---

### \`POST /test/validate\`

**Validate test without running**

Check that a test is well-formed and all selectors exist on the current page.

Use this to pre-check tests before running. Returns validation errors without executing steps.

Response: { valid: boolean, errors?: [{ step?, message }] }

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| \`test\` | any | Test object to validate *(required)* |

**Examples:**

- **validate**: Validate test before running
  \`\`\`json
  {"test":{"version":1,"name":"Test","url":"http://localhost:3000","steps":[{"action":"click","selector":"#btn"}]}}
  \`\`\`

---

## Escape Hatches

### \`GET /console\`

**Get console output**

Returns captured console.log/warn/error/info from the page.

Response: { entries: [{ level, message, timestamp, stack? }] }

Great for debugging - check for errors after actions fail.

---

### \`POST /eval\`

**Execute JavaScript**

Run arbitrary JavaScript in the browser context. Returns the result.

The code runs in the page's context with access to window, document, etc.
Return values are JSON-serialized. Promises are awaited.

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| \`code\` | string | JavaScript code to execute *(required)* |
| \`window\` | string,null | Target window ID |

**Examples:**

- **get-title**: Get page title
  \`\`\`json
  {"code":"document.title"}
  \`\`\`
- **count-items**: Count elements
  \`\`\`json
  {"code":"document.querySelectorAll(\\".item\\").length"}
  \`\`\`
- **get-value**: Get input value
  \`\`\`json
  {"code":"document.querySelector(\\"#email\\").value"}
  \`\`\`
- **check-state**: Check auth state
  \`\`\`json
  {"code":"window.localStorage.getItem(\\"token\\") !== null"}
  \`\`\`
- **scroll-position**: Get scroll position
  \`\`\`json
  {"code":"({ x: window.scrollX, y: window.scrollY })"}
  \`\`\`

---

### \`POST /fetch\`

**Fetch a URL from within the tab context**

Fetch a URL from within the browser tab's context. Essential for accessing blob: URLs
which are only valid in the tab that created them.

Returns the content as base64 with MIME type. Works with:
- blob: URLs (e.g., blob:https://example.com/abc-123)
- data: URLs (returned as-is)
- Regular http/https URLs (fetched from tab's origin)

Response: { success: true, data: { mimeType, base64, size, url } }

Use this when you see a blob URL in the DOM and need to access its content.

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| \`url\` | string | The URL to fetch (blob:, data:, http:, https:) *(required)* |
| \`window\` | string,null | Target window ID |

**Examples:**

- **fetch-blob**: Fetch a blob URL created by the page
  \`\`\`json
  {"url":"blob:https://example.com/abc-123-def"}
  \`\`\`
- **fetch-image**: Fetch an image from the page origin
  \`\`\`json
  {"url":"https://example.com/image.png"}
  \`\`\`

---

### \`POST /screenshot\`

**Capture a screenshot**

Capture the page or a specific element as base64 PNG/WebP/JPEG.

Works automatically in the Haltija Desktop app. In browser widget mode, captures viewport only.

Response: { success, image: "data:image/png;base64,...", width, height, source }

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| \`selector\` | string,null | Element to capture (omit for full page) |
| \`scale\` | number,null | Scale factor (default 1) |
| \`maxWidth\` | number,null | Max width in pixels |
| \`maxHeight\` | number,null | Max height in pixels |
| \`window\` | string,null | Target window ID |
| \`chyron\` | boolean,null | Burn page title, URL, timestamp into image (default true, set false for clean screenshot) |
| \`delay\` | number,null | Wait ms before capturing (e.g. 1000 to let page settle after navigation) |

**Examples:**

- **full-page**: Capture entire page with chyron showing URL/title
  \`\`\`json
  {}
  \`\`\`
- **element**: Capture specific element
  \`\`\`json
  {"selector":"#chart"}
  \`\`\`
- **thumbnail**: Small thumbnail
  \`\`\`json
  {"scale":0.5,"maxWidth":400}
  \`\`\`
- **clean**: Clean screenshot without burned-in metadata
  \`\`\`json
  {"chyron":false}
  \`\`\`

---

### \`POST /snapshot\`

**Capture page snapshot**

Capture current page state for debugging.

Includes: DOM tree, console logs, viewport size, scroll position, URL, timestamp.

Response: { snapshot: { url, title, viewport, dom, console, timestamp } }

Great for debugging test failures - call this when something goes wrong.

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| \`trigger\` | string,null | What triggered the snapshot (e.g., "manual", "test-failure") |
| \`context\` | ,null | Additional context about the snapshot |

**Examples:**

- **manual**: Manual debug snapshot
  \`\`\`json
  {"trigger":"manual"}
  \`\`\`
- **test-fail**: Capture after test failure
  \`\`\`json
  {"trigger":"test-failure","context":{"step":3,"error":"Element not found"}}
  \`\`\`

---
`

export const DOCS_MD = `# Haltija: Browser Control for AI Agents

> **Auto-generated from \`src/api-schema.ts\`** - Do not edit directly.

You have access to a live browser tab. Use the \`hj\` command to see the DOM,
click elements, type text, run JavaScript, and watch for changes.

## Quick Start

\`\`\`
hj status              # Check connection
hj tree                # See page structure (ref IDs for targeting)
hj click 42            # Click element by ref ID
hj click "#submit"     # Click by CSS selector
hj type 10 "hello"     # Type into input (realistic keystroke simulation)
hj key Enter           # Press keys
hj screenshot          # Capture page
hj --help              # All commands
\`\`\`

## Commands by Category

### Status & Info

- \`hj status\` - Server status
- \`hj stats\` - Efficiency and usage statistics
- \`hj version\` - [Deprecated] Use /status instead
- \`hj docs\` - [Deprecated] Use /api instead
- \`hj api\` - Full API reference

### See the Page

- \`hj tree [selector, depth, includeText, ...]\` - Get DOM tree structure
- \`hj query [selector, all]\` - Query DOM elements by selector
- \`hj inspect [selector, fullStyles, matchedRules, ...]\` - Deep inspection of an element
- \`hj inspectAll [selector, limit, fullStyles, ...]\` - Inspect multiple elements
- \`hj find [text, tag, exact, ...]\` - Find elements by text content
- \`hj form [selector, includeDisabled, includeHidden, ...]\` - Extract all form values as structured JSON

### Interact

- \`hj click [ref, selector, text, ...]\` - Click an element
- \`hj type [ref, selector, text, ...]\` - Type text into an element
- \`hj key [key, ref, selector, ...]\` - Send keyboard input
- \`hj drag [selector, deltaX, deltaY, ...]\` - Drag from an element
- \`hj highlight [selector, label, color, ...]\` - Visually highlight an element
- \`hj unhighlight\` - Remove highlight
- \`hj scroll [selector, x, y, ...]\` - Scroll to element or position
- \`hj wait [ms, forElement, hidden, ...]\` - Wait for time, element, or condition
- \`hj call [selector, method, args, ...]\` - Call a method or get a property on an element

### Navigate

- \`hj navigate [url, window]\` - Navigate to a URL
- \`hj refresh [soft, window]\` - Refresh the page
- \`hj location\` - Get current URL and title

### Watch Events

- \`hj events-watch [preset, categories]\` - Start watching semantic events
- \`hj events-unwatch\` - Stop watching events
- \`hj events\` - Get captured semantic events
- \`hj events-stats\` - Get event aggregation statistics

### Watch DOM Changes

- \`hj mutations-watch [root, childList, attributes, ...]\` - Start watching DOM mutations
- \`hj mutations-unwatch\` - Stop watching mutations
- \`hj mutations-status\` - Get mutation watch status

### User Selection

- \`hj select [action, window]\` - Interactive element selection
- \`hj select-start\` - [Deprecated] Use /select with action:"start"
- \`hj select-cancel\` - [Deprecated] Use /select with action:"cancel"
- \`hj select-status\` - [Deprecated] Use /select with action:"status"
- \`hj select-result\` - [Deprecated] Use /select with action:"result"
- \`hj select-clear\` - [Deprecated] Use /select with action:"clear"

### Multiple Tabs

- \`hj windows\` - List connected windows
- \`hj tabs-open [url]\` - Open a new tab
- \`hj tabs-close [window]\` - Close a tab
- \`hj tabs-focus [window]\` - Focus a tab

### Record & Replay

- \`hj recording [action, name, id, ...]\` - Record user actions and generate tests
- \`hj recording-start\` - [Deprecated] Use /recording with action:"start"
- \`hj recording-stop\` - [Deprecated] Use /recording with action:"stop"
- \`hj recording-generate [name]\` - [Deprecated] Use /recording with action:"generate"
- \`hj recordings\` - [Deprecated] Use /recording with action:"list"

### Run Tests

- \`hj test-run [test, format, stepDelay, ...]\` - Run a JSON test
- \`hj test-suite [tests, format, testDelay, ...]\` - Run multiple tests
- \`hj test-validate [test]\` - Validate test without running

### Debug & Eval

- \`hj console\` - Get console output
- \`hj eval [code, window]\` - Execute JavaScript
- \`hj fetch [url, window]\` - Fetch a URL from within the tab context
- \`hj screenshot [selector, scale, maxWidth, ...]\` - Capture a screenshot
- \`hj snapshot [trigger, context]\` - Capture page snapshot

## Tips

1. \`hj tree\` first — ref IDs are the fastest way to target elements
2. Selectors support \`:text()\` pseudo-selector: \`hj click "button:text(Sign in)"\`
3. \`:text(/regex/i)\` for regex matching: \`hj click "a:text(/sign\\s+up/i)"\`
4. \`hj events\` shows what happened — aggregated semantic events, not raw DOM
5. \`hj highlight 42 "Look here"\` to show the user something
6. \`hj recording start\` survives page navigations — record OAuth flows, multi-page checkouts
7. \`hj api\` for the full API reference with all parameters

## Test Runner

\`\`\`
hj test-run tests/login.json       # Run a test
hj test-validate tests/login.json   # Validate format
hj test-suite tests/a.json tests/b.json  # Run multiple
\`\`\`

Test steps: \`navigate\`, \`click\`, \`type\`, \`check\`, \`key\`, \`wait\`, \`assert\`, \`eval\`, \`verify\`

The \`type\` action uses realistic per-character keystroke simulation by default.
Add \`"paste": true\` for fast paste-style input (still framework-compatible).

## Full API Reference

Run \`hj api\` for complete endpoint docs with all parameters and examples.`
